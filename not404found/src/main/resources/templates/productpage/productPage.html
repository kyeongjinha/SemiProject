<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/productpage/productPage.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <title>productPage</title>
</head>
<body>
<header th:replace="/common/header.html"></header>

<div class="display-flex"> <!-- 섬네일 이미지랑 글 -->

    <div class="product-images"> <!-- 큰이미지 + 섬네일 -->
        <div class="thumbnail-images"> <!-- 섬네일 -->
            <img class="thumbnail-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[0].modifyName}" alt="Thumbnail1" id="thumbnail1">  <!--src="/images/productpage/product6.jpg" -->
            <img class="thumbnail-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[1].modifyName}" alt="Thumbnail2" id="thumbnail2">   <!--src="/images/productpage/product2.jpg" -->
            <img class="thumbnail-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[2].modifyName}" alt="Thumbnail3" id="thumbnail3">   <!--src="/images/productpage/product3.jpg" -->
            <img class="thumbnail-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[3].modifyName}" alt="Thumbnail4" id="thumbnail4">   <!--src="/images/productpage/product4.jpg" -->
            <img class="thumbnail-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[4].modifyName}" alt="Thumbnail5" id="thumbnail5">   <!--src="/images/productpage/product5.jpg" -->
        </div>
        <img class="main-image" th:src="'http://localhost:8404/imagePath/' + ${pList[0].attachmentList[0].modifyName}" alt="큰 이미지" id="largeImage">
    </div>
    <div class="production_header">

        <div class="production_header2">
            <a class="production_header3" href="브랜드 주소"
               &amp;affect_type=ProductSaleDetail&amp;affect_id="1269519"></a></p>
            <div th:text="${products[0].getName()}" id="productName" class="production_header4"><b><span class="production_header5"> 붙이는 템바보드 재단서비스(300x2400 /
                            600x2400)</span></di></b>
            <span class="like_action"><button class="like_action2" type="button">
                        <svg class="icon1" aria-label="" width="20" height="" fill="#fd0000" stroke="currentColor"
                             stroke-width="0.5" viewBox="0 0 23 21" preserveAspectRatio="xMidYMid meet">
                            <path
                                    d="M12 21.21l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.39L12 21.21z">
                                <!-- <pathd="M11.53 18.54l-8.06 4.31A1 1 0 0 1 2 21.97V3.5A1.5 1.5 0 0 1 3.5 2h17A1.5 1.5 0 0 1 22 3.5v18.47a1 1 0 0 1-1.47.88l-8.06-4.31a1 1 0 0 0-.94 0z">-->
                        </path></svg></button>
            </span>
            </div>
        <div class="review_score">
            <p class="review_score2"><a class="review_score3" href="#review4 리뷰 게시판 연결 하기">
                <span class="review_icon" aria-label="별점 4.8점"><svg fill="#ff923a" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                                <defs>
                                    <path id="star-path-1.000"
                                          d="M11.9996 19.7201L6.32294 22.1251C5.5626 22.4472 5.005 22.0311 5.0755 21.2188L5.60855 15.0767L1.5671 10.421C1.02579 9.79745 1.24924 9.13855 2.04358 8.95458L8.04973 7.56354L11.2287 2.28121C11.6545 1.57369 12.3502 1.5826 12.7706 2.28121L15.9496 7.56354L21.9557 8.95458C22.7602 9.1409 22.9667 9.8053 22.4322 10.421L18.3907 15.0767L18.9238 21.2188C18.9952 22.0414 18.4271 22.4432 17.6764 22.1251L11.9996 19.7201Z">
                                    </path>
                                    <clipPath id="star-clip-1.000">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                    </clipPath>
                                </defs>
                                <use xlink:href="#star-path-1.000" fill="#DBDBDB"></use>
                                <use clip-path="url(#star-clip-1.000)" xlink:href="#star-path-1.000"></use>
                            </svg><svg fill="#ff923a" width="1em" height="1em" preserveAspectRatio="xMidYMid meet"
                                       viewBox="0 0 24 24">
                                <defs>
                                    <path id="star-path-1.000"
                                          d="M11.9996 19.7201L6.32294 22.1251C5.5626 22.4472 5.005 22.0311 5.0755 21.2188L5.60855 15.0767L1.5671 10.421C1.02579 9.79745 1.24924 9.13855 2.04358 8.95458L8.04973 7.56354L11.2287 2.28121C11.6545 1.57369 12.3502 1.5826 12.7706 2.28121L15.9496 7.56354L21.9557 8.95458C22.7602 9.1409 22.9667 9.8053 22.4322 10.421L18.3907 15.0767L18.9238 21.2188C18.9952 22.0414 18.4271 22.4432 17.6764 22.1251L11.9996 19.7201Z">
                                    </path>
                                    <clipPath id="star-clip-1.000">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                    </clipPath>
                                </defs>
                                <use xlink:href="#star-path-1.000" fill="#DBDBDB"></use>
                                <use clip-path="url(#star-clip-1.000)" xlink:href="#star-path-1.000"></use>
                            </svg><svg fill="#ff923a" width="1em" height="1em" preserveAspectRatio="xMidYMid meet"
                                       viewBox="0 0 24 24">
                                <defs>
                                    <path id="star-path-1.000"
                                          d="M11.9996 19.7201L6.32294 22.1251C5.5626 22.4472 5.005 22.0311 5.0755 21.2188L5.60855 15.0767L1.5671 10.421C1.02579 9.79745 1.24924 9.13855 2.04358 8.95458L8.04973 7.56354L11.2287 2.28121C11.6545 1.57369 12.3502 1.5826 12.7706 2.28121L15.9496 7.56354L21.9557 8.95458C22.7602 9.1409 22.9667 9.8053 22.4322 10.421L18.3907 15.0767L18.9238 21.2188C18.9952 22.0414 18.4271 22.4432 17.6764 22.1251L11.9996 19.7201Z">
                                    </path>
                                    <clipPath id="star-clip-1.000">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                    </clipPath>
                                </defs>
                                <use xlink:href="#star-path-1.000" fill="#DBDBDB"></use>
                                <use clip-path="url(#star-clip-1.000)" xlink:href="#star-path-1.000"></use>
                            </svg><svg fill="#ff923a" width="1em" height="1em" preserveAspectRatio="xMidYMid meet"
                                       viewBox="0 0 24 24">
                                <defs>
                                    <path id="star-path-1.000"
                                          d="M11.9996 19.7201L6.32294 22.1251C5.5626 22.4472 5.005 22.0311 5.0755 21.2188L5.60855 15.0767L1.5671 10.421C1.02579 9.79745 1.24924 9.13855 2.04358 8.95458L8.04973 7.56354L11.2287 2.28121C11.6545 1.57369 12.3502 1.5826 12.7706 2.28121L15.9496 7.56354L21.9557 8.95458C22.7602 9.1409 22.9667 9.8053 22.4322 10.421L18.3907 15.0767L18.9238 21.2188C18.9952 22.0414 18.4271 22.4432 17.6764 22.1251L11.9996 19.7201Z">
                                    </path>
                                    <clipPath id="star-clip-1.000">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                    </clipPath>
                                </defs>
                                <use xlink:href="#star-path-1.000" fill="#DBDBDB"></use>
                                <use clip-path="url(#star-clip-1.000)" xlink:href="#star-path-1.000"></use>
                            </svg><svg fill="#ff923a" width="1em" height="1em" preserveAspectRatio="xMidYMid meet"
                                       viewBox="0 0 24 24">
                                <defs>
                                    <path id="star-path-0.783"
                                          d="M11.9996 19.7201L6.32294 22.1251C5.5626 22.4472 5.005 22.0311 5.0755 21.2188L5.60855 15.0767L1.5671 10.421C1.02579 9.79745 1.24924 9.13855 2.04358 8.95458L8.04973 7.56354L11.2287 2.28121C11.6545 1.57369 12.3502 1.5826 12.7706 2.28121L15.9496 7.56354L21.9557 8.95458C22.7602 9.1409 22.9667 9.8053 22.4322 10.421L18.3907 15.0767L18.9238 21.2188C18.9952 22.0414 18.4271 22.4432 17.6764 22.1251L11.9996 19.7201Z">
                                    </path>
                                    <clipPath id="star-clip-0.783">
                                        <rect x="0" y="0" width="18.799999999999997" height="24"></rect>
                                    </clipPath>
                                </defs>
                                <use xlink:href="#star-path-0.783" fill="#DBDBDB"></use>
                                <use clip-path="url(#star-clip-0.783)" xlink:href="#star-path-0.783"></use>
                            </svg></span>
                <span class="review_text"><span th:text="${products[0].getReviewCount()}" class="review_text2"><span class="review_text3"></span>&nbsp;60<span class="review_text4"></span></span><span
                    class="review_text5">개 리뷰</span></span></a>
            </p>
            <div class="price"><span class="price2"></span></dev>
                <span class="price3"></svg>
                    </button></span>
                <span class="price4"></span>
                        <div class="price5">
                            <div class="price6">
                                <th:block th:if="${products[0].getDiscountPrice()} == null">
                                    <span th:text="${products[0].getPrice()}" class="number"></span>
                                    <span class="won">원</span>
                                </th:block>
                                <th:block th:if="${products[0].getDiscountPrice() != null}">
                                    <span th:text="${products[0].getDiscountPrice()}" class="number"></span>
                                    <span class="won">원</span>
                                </th:block>
                                <svg
                                    class="icon" aria-label="특가" width="40" height="20" viewBox="0 0 30 20"
                                    preserveAspectRatio="xMidYMid meet">
                                    <rect width="30" height="20" fill="#F77" rx="4"></rect>
                                    <path fill="#fff"
                                          d="M12.83 7.93v-.97H7.93v-.555h5.228v-.991H6.655v4.063h6.59v-.992H7.928V7.93h4.901zm-6.295 3.747v1.002h5.326v2.037h1.274v-3.04h-6.6zm7.733-.588v-1.024H5.5v1.024h8.768zM23.91 9.782V8.725h-1.405V5H21.24v9.705h1.264V9.782h1.405zm-3.954-3.79h-4.53v1.056h3.147c-.174 1.938-1.623 3.975-3.736 4.945l.773.958c2.974-1.612 4.259-4.03 4.346-6.96z">
                                    </path>
                                </svg></div>
                        </div>
            </div>
            <div class="promotion">
                <div class="promotion2">
                    <span class="promotion3" style="color:gray;">혜택 </span>
                    <span class="reward_points">
                            <span th:text="${grade}+'등급 '+${products[0].getMileage()}+'원 적립'" id="mileage" class="reward_points2"><b>xx<!-- -->P</b> 적립 (<!-- -->FRIEND
                                <!-- -->x.x<!-- -->% 적립)
                            </span>
                        </span>
                </div>
                <div class="delivery_header">
                    <div class="delivery">
                        <span class="delivery2" style="color: gray;">배송</span>
                        <span th:text="${products[0].getDeliveryCost()}+'원'" id="deliveryCost"  class="delivery3"><b>무료배송 </b>
                                <br>
                            </svg><span style="color: gray;">제주도/도서산간 지역 5,000원</span></span>
                    </div>
                    <div class="delivery2_header">
                        <div class="delivery2_1">
                            <div class="delivery2_2">
                                <div class="delivery2_3"><svg class="delivery2_icon" width="22" height="22"
                                                              fill="none" preserveAspectRatio="xMidYMid meet">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M13.303 5.04l.394.92L7 8.83V12a.5.5 0 01-1 0V8.17l7.303-3.13z"
                                          fill="#00B8F0"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M10.197 4.628a.5.5 0 00-.394 0L4.269 7 10 9.456 15.73 7l-2.427-1.04-3.106-1.332zM3.5 14.341V7.758l6 2.572v6.912L3.803 14.8a.5.5 0 01-.303-.46zm7 2.9l1.534-.657a5 5 0 014.466-5.56V7.759l-6 2.572v6.912zm.09 1.05l1.664-.713A5.002 5.002 0 0022 16a5 5 0 00-4.5-4.975V7.659a1.5 1.5 0 00-.91-1.378l-2.893-1.24-3.106-1.332a1.5 1.5 0 00-1.182 0l-6 2.572A1.5 1.5 0 002.5 7.659v6.682c0 .6.358 1.142.91 1.378l6 2.572a1.5 1.5 0 001.18 0zM17 20a4 4 0 100-8 4 4 0 000 8zm.5-6.5a.5.5 0 00-1 0v2H15a.5.5 0 000 1h2a.5.5 0 00.5-.5v-2.5z"
                                          fill="#3F474D"></path>
                                </svg>
                                    <span class="text"><span class="date">11/23(목)<!-- --> </span>도착 예정</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="option_choice_header">
            <div class="option_choice">
                <div class="option_choice1">
                    <select class="option_choice1_1">
                        <option selected="" value="" disabled="">디자인</option>
                        <option value="0">300x2400mm (얇은 줄)</option>
                        <option value="1">600x2400mm (얇은 줄) (+2000원)</option>
                        <option value="2">300x2400mm (굵은 줄) (+3000원)</option>
                        <option value="3">600x2400mm (굵은 줄) (+6000원)</option>
                    </select><span class="option choice1_1_icon">
                            <svg class="icon" width="10" height="10" style="fill:currentColor"
                                 preserveAspectRatio="xMidYMid meet">
                            </svg></span>
                </div>
                <div class="option_choice2">
                    <select class="option_choice2_1">
                        <option selected="" value="" disabled="">색상</option>
                        <option th:each="color : ${products[0].getColor()}" th:value="${color}" th:text="${color}"></option>
                    </select><span class="option_choice2_1_icon">
                            <svg class="icon" width="10" height="10" style="fill:currentColor"
                                 preserveAspectRatio="xMidYMid meet">
                                <!-- 내부를 채우는 색, 화면 가로대 세로의 비율이고 xMidYMid : x 중간값 y 중간값이라고 함 -->
                                <!-- <path fill-rule="evenodd" d="M0 3l5 5 5-5z"></path> -->
                            </svg></span>
                </div>
                <div class="selectedOptions">
                    <div class="optionDisplay" id="optionDisplay1"> <!-- ID 추가 -->
                        <p id="selectedOption1"></p>
                        <span id="selectedOptionText"></span>
                    </div>
                    <div class="optionDisplay" id="optionDisplay2"> <!-- ID 추가 -->
                        <p id="selectedOption2"></p>
                        <span id="selectedOption2Text"></span>
                    </div>
                </div>
                <div>
                    <!-- 수량 조절 -->
                    <button id="decreaseButton" onclick="decreaseQuantity()">-</button>
                    <span id="quantity">1</span>
                    <button id="increaseButton" onclick="increaseQuantity()">+</button><br><br>
                    <hr>
                </div>
                <div class="totalPurchase">
                    <p>총 구매가</p>
                    <p id="totalPrice">0<span class="won"> 원</span></p>
                </div>
            </div>
        </div>
        <div class="choice_list">
            <br>
            <span class="choice_list2">쿠폰적용 및 패키기 할인 적용금액은 장바구니 / 주문서 작성시 적용됩니다.</span>
            </p>
            <div class="choice_list3">
                <button class="choice_list3_1" type="button">장바구니</button><br>
                <form action="order/orderMember" method="post">
                <button id="buy" class="choice_list3_2" type="submit">바로구매</button>
                    <input type="hidden" name="productName" id="product">
                    <input type="hidden" name="amount" id="amount">
                    <input type="hidden" name="mileage" id="userMileage">
                    <input type="hidden" name="deliveryCost" id="productDeliveryCost">
                    <input type="hidden" name="price" id="price">
                    <input type="hidden" name="discountPrice" id="discountPrice">
                </form>
            </div>
        </div>
    </div>

            <script>

            </script>

</div>

</div>
</div>
</div>
<script th:inline="javascript">
    /*<![CDATA[*/
    const product = [[${products[0].getPrice()}]];
    const discountP = [[${products[0].getDiscountPrice()}]];
    // JavaScript 코드에서 myVariable 사용
    /*]]>*/
</script>
<script>
    const price = document.getElementById('totalPrice');
    const buyButton = document.getElementById('buy');
    const incBt = document.getElementById('increaseButton');
    const decBt = document.getElementById('decreaseButton');
    price.textContent = product.toLocaleString();

    incBt.addEventListener('click',function (){
        let textPrice = price.textContent;  //String 타입
        let numPrice = 1 * textPrice.replace(/,/g, "")  // , 제거
        numPrice = numPrice + (product*1);
        price.textContent = numPrice.toLocaleString();
    });
    decBt.addEventListener('click',function (){
        let numberPrice = price.textContent.replace(/,/g,"") * 1;    //num   60000
        let numberProduct = product * 1;    //num   60000
        if(numberProduct !== numberPrice){  //6만과, 6만이 같지 않냐? ㅇㅇ면 아래로
            let textPrice = price.textContent;
            let numPrice = textPrice.replace(/,/g, "")
            numPrice = numPrice - (product * 1);
            price.textContent = numPrice.toLocaleString();
        }
    });
    buyButton.addEventListener('click',function (){
        const productName = document.getElementById('productName').textContent;
        const amount = document.getElementById('quantity').textContent;
        const mileage = document.getElementById('mileage').textContent;
        const deliveryCost = document.getElementById('deliveryCost').textContent;
        const price = document.getElementById('totalPrice').textContent;
        document.getElementById("product").value = document.getElementById("productName").textContent;
        document.getElementById("amount").value = document.getElementById("quantity").textContent;
        document.getElementById("userMileage").value = document.getElementById("mileage").textContent.replace(/\D/g, '');
        document.getElementById("productDeliveryCost").value = document.getElementById("deliveryCost").textContent.replace(/\D/g, '');
        document.getElementById("price").value = document.getElementById("totalPrice").textContent.replace(/\D/g, '');
        document.getElementById("discountPrice").value = discountP;
        console.log(document.getElementById("price").value);




    });


</script>
<script src="/js/productpage/productPage.js"></script>
</body>

</html>
</body>
</html>